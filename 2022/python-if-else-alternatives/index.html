<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>Python if-else alternatives for better design - Vittorio Mattei</title><meta name=author content>
<meta name=author-link content><meta name=description content="Analysis on possible alternatives for the if elif else construct in Python. Consider using dict or match case."><meta name=keywords content='programming,python,beginner,design'><meta itemprop=name content="Python if-else alternatives for better design"><meta itemprop=description content="Analysis on possible alternatives for the if elif else construct in Python. Consider using dict or match case."><meta itemprop=datePublished content="2022-07-22T00:00:00+00:00"><meta itemprop=dateModified content="2022-07-22T00:00:00+00:00"><meta itemprop=wordCount content="1360"><meta itemprop=keywords content="Programming,Python,Beginner,Design"><meta property="og:url" content="https://vittoriomattei.com/2022/python-if-else-alternatives/"><meta property="og:site_name" content="Vittorio Mattei"><meta property="og:title" content="Python if-else alternatives for better design"><meta property="og:description" content="Analysis on possible alternatives for the if elif else construct in Python. Consider using dict or match case."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-07-22T00:00:00+00:00"><meta property="article:modified_time" content="2022-07-22T00:00:00+00:00"><meta property="article:tag" content="Programming"><meta property="article:tag" content="Python"><meta property="article:tag" content="Beginner"><meta property="article:tag" content="Design"><meta name=twitter:card content="summary"><meta name=twitter:title content="Python if-else alternatives for better design"><meta name=twitter:description content="Analysis on possible alternatives for the if elif else construct in Python. Consider using dict or match case."><meta name=application-name content="FixIt"><meta name=apple-mobile-web-app-title content="FixIt"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=../../favicon.ico><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://vittoriomattei.com/2022/python-if-else-alternatives/><link rel=prev href=https://vittoriomattei.com/about/><link rel=next href=https://vittoriomattei.com/2022/python-aws-introduction-to-config-parameters/><link rel=stylesheet href=../../css/style.min.css><link rel=preload href=../../lib/fontawesome-free/all.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=../../lib/fontawesome-free/all.min.css></noscript><link rel=preload href=../../lib/animate/animate.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=../../lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Python if-else alternatives for better design","inLanguage":"en-us","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/vittoriomattei.com\/2022\/python-if-else-alternatives\/"},"genre":"posts","keywords":"programming, python, beginner, design","wordcount":1360,"url":"https:\/\/vittoriomattei.com\/2022\/python-if-else-alternatives\/","datePublished":"2022-07-22T00:00:00+00:00","dateModified":"2022-07-22T00:00:00+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Vittorio Mattei"},"description":"Analysis on possible alternatives for the if elif else construct in Python. Consider using dict or match case."}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper data-page-style=normal><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper><div class=header-title><a href=../../ title="Vittorio Mattei"><span class=header-title-text>Vittorio Mattei</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=../../resume/resume.pdf>Rèsumè</a></li><li class=menu-item><a class=menu-link href=../../posts/>Blog</a></li><li class=menu-item><a class=menu-link href=../../categories/>Categories</a></li><li class=menu-item><a class=menu-link href=../../about>About</a></li><li class="menu-item delimiter"></li><li class="menu-item theme-switch" title="Switch Theme"><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=../../ title="Vittorio Mattei"><span class=header-title-text>Vittorio Mattei</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=menu-item><a class=menu-link href=../../resume/resume.pdf>Rèsumè</a></li><li class=menu-item><a class=menu-link href=../../posts/>Blog</a></li><li class=menu-item><a class=menu-link href=../../categories/>Categories</a></li><li class=menu-item><a class=menu-link href=../../about>About</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title="Switch Theme"><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span></li></ul></nav></div></header><main class=container><aside class="aside-collection animate__animated animate__fadeIn animate__faster" aria-label=Collections></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>Python if-else alternatives for better design</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><i class="fa-solid fa-user-circle" aria-hidden=true></i>
Vittorio Mattei</span></span><span class=post-included-in>&nbsp;included in <a href=../../categories/programming/ class=post-category title="Category - Programming"><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> Programming</a></span></div><div class=post-meta-line><span title="published on 2022-07-22 00:00:00"><i class="fa-solid fa-calendar-days fa-fw me-1" aria-hidden=true></i><time datetime=2022-07-22>2022-07-22</time></span>&nbsp;<span title="1360 words"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>About 1400 words</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>7 minutes</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li><a href=#match-case>Match-case</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div><div class=content id=content><p>There is no doubt that one of the first conditional construct a programmer will encounter is the if-elif-else construct.<br>While the syntax may change across languages, the logical meaning is always the same:</p><pre tabindex=0><code>if condition_1:
    do something
else if condition_2:
    do something different
else:
    do something generic</code></pre><p>While this construct is incredibly easy to use, there are some drawbacks to it, when the logic starts expanding.<br>Note that obviously there isn&rsquo;t a best rule, the only way to decide which solution to use is on a case by case scenario. Refactoring is also a fundamental tool. Nothing stops you from using one method and then changing to another later, when you realize your code can be simplified by a refactoring.</p><h1 id=case-1-multiple-well-defined-conditions class=heading-element><a href=#case-1-multiple-well-defined-conditions class=heading-mark></a>Case 1: Multiple well defined conditions</h1><p>In the first case we&rsquo;ll set up the following scenario.<br>We are creating a texting game. The player can cast spells to attack enemies, and we just decided to implement two simple spells: &ldquo;fireball&rdquo; and &ldquo;thunderbolt&rdquo;.<br>The setup for this part of the code is simple: the player inputs a command <strong>&ldquo;spell <em>&lt;spell_name></em>&rdquo;</strong> and the corresponding spell is cast to the enemy. We assume that the enemy is already selected by a previous command and we just want to cast the spell against him. We also assume that the spell command is already interpreted, so the only part to handle is the spell selection and cast.</p><p>To cast a spell, we need to call the method <em>cast</em> of the object <em>player</em>. The method takes two parameters: the spell object and the enemy.</p><pre tabindex=0><code># player.py
class Player(Entity):
    ...
    def cast(spell: spells.Spell, enemy: enemy.Enemy):
        # do something
    ...</code></pre><p>The <strong>issue</strong> that we want to resolve is how to map a string to a spell class.<br>The simplest solution is to use a typical if-elif-else chain. If we find the spell, we can call the <em>cast</em> method, otherwise we raise an exception, that can be handled from outside when there isn&rsquo;t a match for a command.</p><pre tabindex=0><code># spells.py
class Spell:
    ...
class Fireball(Spell):
    ...
...
# Assume that we defind all possible spells as classes that extend Spell

def elaborate_input_spell(spell_name: str, player: player.Player, enemy: enemy.Enemy):
    if spell_name == &#34;fireball&#34;:
        return player.cast(Fireball(), enemy)
    elif spell_name == &#34;thunderbolt&#34;:
        return player.cast(Thunderbolt(), enemy)
    else:
        raise Exception(&#34;Spell not found.&#34;, spell_name)</code></pre><p>This solution is simple and easy to understand, but what if we need to add more spells? That code might easily devolve into something like this:</p><pre tabindex=0><code># spells.py

def elaborate_input_spell(spell_name: str, player: player.Player, enemy: enemy.Enemy):
    if spell_name == &#34;fireball&#34;:
        return player.cast(Fireball(), enemy)
    elif spell_name == &#34;thunderbolt&#34;:
        return player.cast(Thunderbolt(), enemy)
    elif spell_name == &#34;blizzard&#34;:
        return player.cast(Blizzard(), enemy)
    elif spell_name == &#34;meteor&#34;:
        return player.cast(Meteor(), enemy)
    elif spell_name == &#34;sap&#34;:
        return player.cast(Sap(), enemy)
    elif spell_name == &#34;whirlwind&#34;:
        return player.cast(Whirlwind(), enemy)
    elif spell_name == &#34;storm&#34;:
        return player.cast(Storm(), enemy)
    elif spell_name == &#34;bury&#34;:
        return player.cast(Bury(), enemy)
    elif spell_name == &#34;blind&#34;:
        return player.cast(Blind(), enemy)
    else:
        raise Exception(&#34;Spell not found.&#34;, spell_name)</code></pre><p>&mldr; and so on and so on.<br>Note how all the conditions are a simple equality of strings, and each string is then <strong>mapped</strong> to a fixed class. Why not use a <a href=https://docs.python.org/3/tutorial/datastructures.html#dictionaries target=_blank rel="external nofollow noopener noreferrer">dictionary</a> for this?<br>A dictionary allows to map a <em>key</em> to a <em>value</em>. Keys and values can be of any type so this is not only restricted between strings and classes but you can do any kind of mapping.</p><p>Here&rsquo;s how we can refactor the above code by using a dictionary:</p><pre tabindex=0><code># spells.py
# Spell classes definitions go here

spells = {
    &#34;fireball&#34;: Fireball,
    &#34;thunderbolt&#34;: Thunderbolt,
    &#34;blizzard&#34;: Blizzard,
    &#34;meteor&#34;: Meteor,
    &#34;sap&#34;: Sap,
    &#34;whirlwind&#34;: Whirlwind,
    &#34;storm&#34;: Storm,
    &#34;bury&#34;: Bury,
    &#34;blind&#34;: Blind
}

def elaborate_input_spell(spell_name: str, player: player.Player, enemy: enemy.Enemy):
    spell = spells.get(spell_name)
    if spell:
        return player.cast(spell(), enemy)
    raise Exception(&#34;Spell not found.&#34;, spell_name)</code></pre><p>When we have new spells we just need to add them to <em>spells</em>.<br>Note that <strong>dict().get(value)</strong> will return <strong>None</strong> if the key is not found, so we call cast only if spell is not <strong>None</strong>. The return statement will ensure that we don&rsquo;t raise an Exception in the normal flow.<br>Not also that spells is defined outside the method, as to ensure that the variable is initialized only at startup and not in every method call! Also note how the values are classes and not instances, otherwise we would return the same instance everytime we cast a spell, instead of creating a new one.</p><p>It&rsquo;s also import to note that now you can import the spells variable in other modules, so when you need to use spells for additional operation, you don&rsquo;t need to copy the whole if-else tree, but you only import spells.spells.</p><h1 id=case-2-composed-conditions class=heading-element><a href=#case-2-composed-conditions class=heading-mark></a>Case 2: composed conditions</h1><p>Let&rsquo;s now have a different case. This time, we want to sell an item. The sell function will be called when the player inputs the command <strong>&ldquo;sell <em>&lt;item></em>&rdquo;</strong>.<br>We assume that the player is already talking to a merchant and the item to sell has already been selected</p><p>There are different elements to consider:</p><ul><li>The item rarity</li><li>The item type</li><li>The item durability (new, used, destroyed)</li></ul><pre tabindex=0><code># items.py
item_rarities = [&#34;common&#34;, &#34;rare&#34;, &#34;epic&#34;]
item_types = [&#34;weapon&#34;, &#34;armor&#34;]
item_durabilities = [&#34;new&#34;, &#34;used&#34;, &#34;destroyed&#34;]

class Item:
    rarity: str
    item_type: str
    durability: str</code></pre><p>Let&rsquo;s assume we start by implementing a sell function that only takes into consideration of the <em>durability</em> property. We can just check it against <em>item_types</em> and return a different sell value:</p><pre tabindex=0><code># merchant.py

def sell(item: items.Item):
    if item.item_type == &#34;weapon&#34;:
        return 1000
    elif item.item_type == &#34;armor&#34;:
        return 500
    else:
        return 0</code></pre><p>This is pretty straightforward and we easily implemented a sell function for our game.<br>But what if now we want to take into consideration the durability?</p><pre tabindex=0><code># merchant.py

def sell(item: items.Item):
    if item.item_type == &#34;weapon&#34; and item.durability == &#34;new&#34;:
        return 1000
    elif item.item_type == &#34;armor&#34; and item.durability == &#34;new&#34;:
        return 500
    elif (item.item_type == &#34;armor&#34; and item.durability == &#34;used&#34;) or (item.item_type == &#34;weapon&#34; and item.durability == &#34;used&#34;):
        # We could only check if durability is used, but this may not be true for additional item types
        return 50
    elif item.durability == &#34;destroyed&#34;:
        return 10
    else:
        return 0</code></pre><p>This starts getting a little bit more confusing and it easily becomes unmaintainable when we add new item types, or we take the rarity into consideration.<br>There are many solutions in this case, it mostly depends on the specific scenario you&rsquo;re analyzing and the action you&rsquo;re doing.<br>In this case we can leverage the fact that we are using a mathematical formula, so we could create maps that associate a base value to the item type and multipliers depending on durability and rarity.</p><h3 id=match-case class=heading-element><a href=#match-case class=heading-mark></a>Match-case</h3><p>What I want to show next is a different approach that has been available since the release of <strong>Python 3.10</strong>. If you come from Java, C# or C++ you&rsquo;re probably already familiar with this approach as they already had switch-case statement.<br>Python implemented this recently and called them <a href=https://peps.python.org/pep-0636/ target=_blank rel="external nofollow noopener noreferrer">match-case</a>, as they allow developers to create pattern matching structures. When if-else conditions start getting long, complicated and depending on each other, you can use match-case to bring some order to the code.<br>Let&rsquo;s rewrite the code seen before</p><pre tabindex=0><code># merchant.py

def sell(item: items.Item):   
    value_elements = (item.item_type, item.item_durability)
    match value_elements:
        case (&#34;weapon&#34;, &#34;new&#34;):
            return 1000
        case (&#34;armor&#34;, &#34;new&#34;):
            return 500
        case ((&#34;weapon&#34; | &#34;armor&#34;), &#34;used&#34;):
            return 50
        case (_, &#34;destroyed&#34;):
            return 0</code></pre><p>Pattern matching allows really powerful conditions and you should check out python documentations for powerful examples. As you can see, it&rsquo;s really easy to add conditions this way, without copying <em>if</em> conditions multiple times in the code. Just remember that this is only possible from <strong>Python 3.10</strong>!</p><h2 id=conclusion class=heading-element><a href=#conclusion class=heading-mark></a>Conclusion</h2><p>As we&rsquo;ve seen, while an if-else approach works, over time it becomes hard to maintain and it easily creates bugs around in your code when you lose tracks of conditions or you start copying your code around. The two easiest solutions depend on the particular case.</p><p>When you have an if-else tree that associates a certain condition with a fixed action, consider using a <strong>dict</strong>. They&rsquo;re easy to implement, they can be imported in other modules and it&rsquo;s easy to modify or improve thm.</p><p>When you&rsquo;re dealing with complex conditions, common actions for multiple conditions, conditions depending only on some parameters, consider using <strong>match-case</strong>. You can probably express the same logical meaning but in a more readable and improvable way.</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="Updated on 2022-07-22 00:00:00">Updated on 2022-07-22&nbsp;</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank>CC BY-NC-SA 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://vittoriomattei.com/2022/python-if-else-alternatives/ data-title="Python if-else alternatives for better design" data-hashtags=programming,python,beginner,design><i class="fa-brands fa-twitter fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://vittoriomattei.com/2022/python-if-else-alternatives/ data-hashtag=programming><i class="fa-brands fa-facebook-square fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://vittoriomattei.com/2022/python-if-else-alternatives/ data-title="Python if-else alternatives for better design"><i class="fa-brands fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=../../tags/programming/ class=post-tag title="Tags - Programming">Programming</a><a href=../../tags/python/ class=post-tag title="Tags - Python">Python</a><a href=../../tags/beginner/ class=post-tag title="Tags - Beginner">Beginner</a><a href=../../tags/design/ class=post-tag title="Tags - Design">Design</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=../../>Home</a></span></section></div><div class=post-nav><a href=../../2022/python-aws-introduction-to-config-parameters/ class=post-nav-item rel=next title="Python configuration parameters with AWS">Python configuration parameters with AWS<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article><aside class=toc id=toc-auto aria-label=Contents><h2 class=toc-title>Contents&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside></main><footer class=footer><div class=footer-container><div class="footer-line powered">Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreferrer" title="Hugo 0.125.5"><img class=hugo-icon src=../../images/hugo.min.svg alt="Hugo logo"> Hugo</a> | Theme - <a href=https://github.com/hugo-fixit/FixIt target=_blank rel=external title="FixIt v0.3.4"><img class=fixit-icon src=../../images/fixit.min.svg alt="FixIt logo"> FixIt</a></div><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2024</span><span class=author itemprop=copyrightHolder>
<a href=../../></a></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label="Back to Top"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class="variant-numeric d-none">0%</span></div></div><div id=mask></div><noscript><div class=noscript-warning>Theme FixIt works best with JavaScript enabled.</div></noscript></div><link rel=preload href=../../lib/katex/katex.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=../../lib/katex/katex.min.css></noscript><link rel=stylesheet href=../../lib/cookieconsent/cookieconsent.min.css><script src=../../lib/sharer/sharer.min.js async defer></script><script src=../../lib/katex/katex.min.js defer></script><script src=../../lib/katex/auto-render.min.js defer></script><script src=../../lib/katex/copy-tex.min.js defer></script><script src=../../lib/katex/mhchem.min.js defer></script><script src=../../lib/cookieconsent/cookieconsent.min.js defer></script><script>window.config={code:{copyTitle:"Copy to clipboard",editLockTitle:"Lock editable code block",editUnLockTitle:"Unlock editable code block",editable:!0,maxShownLines:10},comment:{enable:!1},cookieconsent:{content:{dismiss:"Got it!",link:"Learn more",message:"This website uses Cookies to improve your experience."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},version:"v0.3.4"}</script><script src=../../js/theme.min.js defer></script></body></html>